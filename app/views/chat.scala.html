@(socketURL: String)

<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
        <div id = 'socket' data-url = @socketURL></div>
        
        <div id = 'chatbox' style = "position: fixed; left: 0%; width: 100%; height: 75%; background-color: white; overflow: auto">
            
        </div>

        <div style = "position: fixed; bottom: 0; left:0; width: 100%; height: 15%; margin-bottom: 3px; text-align: center">
            <input type="text" id="send-text" style = "position: relative; width: 80%">
            <button id="send" type="submit" class="btn btn-primary btn-lg btn-block">Send</button>
        </div>


    <script type='text/javascript' src='@routes.Assets.versioned("javascripts/chat.js")'></script>
    <script type='text/javascript' src='@routes.Assets.versioned("javascripts/jquery.js")'></script>
    <script>
      $(document).ready(function(){
          url = $('#socket').attr('data-url')
          console.log(url)
          var connection = new WebSocket(url);
          var $send = $("#send"); 
          var $message = $("#message"); 
          connection.onopen = function() {
                console.log("open")
                $send.on('click', function() {
                    connection.send($('#send-text').val());
                    $('#send-text').val('');
                });
            };
            connection.onmessage = function(event) {
                console.log(event.data);
                $('#chatbox').append('<div>' + event.data + '</div>')
                $('#chatbox').stop ().animate ({
                    scrollTop: $('#chatbox')[0].scrollHeight
                });
            }
              // $send.prop("disabled", false);
              // $messages
              //     .prepend($("<li class='bg-info' style='font-size: 1.5em'>Connected</li>"));
              // $send.on('click', send);
              // $message.keypress(function(event) {
              //   var keycode = (event.keyCode ? event.keyCode : event.which);
              //   if (keycode == '13') {
              //     send();
              //   }
              // });
      })
      
    </script>
    </body>
</html>
